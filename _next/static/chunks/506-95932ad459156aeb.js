(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[506],{67:function(){},2061:function(){},4808:function(e,t,r){"use strict";r.d(t,{H:function(){return d},a:function(){return c}});var s=r(7437),o=r(2265),a=r(1872),l=r(5925),i=r(1490);let n=(0,o.createContext)(void 0);function d(e){let{children:t}=e,[r,d]=(0,o.useState)({user:null,isAuthenticated:!1});(0,o.useEffect)(()=>{let e=localStorage.getItem("auth"),t=i.Z.get("auth");if(e&&t&&d(JSON.parse(e)),0===JSON.parse(localStorage.getItem("users")||"[]").length){let e={id:(0,a.Z)(),email:"admin@admin.com",name:"Administrador",role:"MASTER",password:"admin123",createdAt:new Date().toISOString(),lastLogin:new Date().toISOString()};localStorage.setItem("users",JSON.stringify([e]))}},[]),(0,o.useEffect)(()=>{r.isAuthenticated?(localStorage.setItem("auth",JSON.stringify(r)),i.Z.set("auth","true",{expires:7})):(localStorage.removeItem("auth"),i.Z.remove("auth"))},[r]);let c=async(e,t)=>{let r=JSON.parse(localStorage.getItem("users")||"[]"),s=r.find(r=>r.email===e&&r.password===t);if(s){let e=r.map(e=>e.id===s.id?{...e,lastLogin:new Date().toISOString()}:e);localStorage.setItem("users",JSON.stringify(e));let t={user:{...s,lastLogin:new Date().toISOString()},isAuthenticated:!0};return d(t),localStorage.setItem("auth",JSON.stringify(t)),i.Z.set("auth","true",{expires:7}),l.toast.success("Login realizado com sucesso!"),!0}return l.toast.error("Email ou senha inv\xe1lidos"),!1},u=async e=>{let t=JSON.parse(localStorage.getItem("users")||"[]");if(t.some(t=>t.email===e.email))return l.toast.error("Email j\xe1 cadastrado"),!1;if("GESTOR"===e.role&&!e.teamId)return l.toast.error("ID da equipe \xe9 obrigat\xf3rio para Gestores"),!1;if("CORRETOR"===e.role&&!e.managerId)return l.toast.error("ID do gestor \xe9 obrigat\xf3rio para Corretores"),!1;if("CORRETOR"===e.role&&!t.some(t=>"GESTOR"===t.role&&t.id===e.managerId))return l.toast.error("Gestor n\xe3o encontrado"),!1;let r={id:(0,a.Z)(),...e,createdAt:new Date().toISOString(),lastLogin:new Date().toISOString()};return t.push(r),localStorage.setItem("users",JSON.stringify(t)),l.toast.success("Usu\xe1rio registrado com sucesso!"),!0};return(0,s.jsx)(n.Provider,{value:{...r,login:c,logout:()=>{d({user:null,isAuthenticated:!1}),localStorage.removeItem("auth"),i.Z.remove("auth"),l.toast.success("Logout realizado com sucesso!")},register:u,getUsers:()=>{let e=JSON.parse(localStorage.getItem("users")||"[]");if(!r.user)return[];switch(r.user.role){case"MASTER":return e;case"GESTOR":return e.filter(e=>{var t;return"CORRETOR"===e.role&&e.managerId===(null===(t=r.user)||void 0===t?void 0:t.id)});default:return[]}},deleteUser:e=>{var t;if((null===(t=r.user)||void 0===t?void 0:t.role)!=="MASTER"){l.toast.error("Sem permiss\xe3o para excluir usu\xe1rios");return}let s=JSON.parse(localStorage.getItem("users")||"[]").filter(t=>t.id!==e);localStorage.setItem("users",JSON.stringify(s)),l.toast.success("Usu\xe1rio exclu\xeddo com sucesso!")},updateUser:(e,t)=>{var s,o,a;if((null===(s=r.user)||void 0===s?void 0:s.id)!==e&&(null===(o=r.user)||void 0===o?void 0:o.role)!=="MASTER"){l.toast.error("Sem permiss\xe3o para atualizar usu\xe1rios");return}let i=JSON.parse(localStorage.getItem("users")||"[]").map(r=>r.id===e?{...r,...t}:r);if(localStorage.setItem("users",JSON.stringify(i)),e===(null===(a=r.user)||void 0===a?void 0:a.id)){let t=i.find(t=>t.id===e);t&&d(e=>({...e,user:t}))}l.toast.success("Informa\xe7\xf5es atualizadas com sucesso!")}},children:t})}let c=()=>{let e=(0,o.useContext)(n);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},7574:function(e,t,r){"use strict";r.d(t,{F:function(){return d},e:function(){return c}});var s=r(7437),o=r(2265),a=r(7504),l=r(1872),i=r(5925);let n=(0,o.createContext)(void 0);function d(e){let{children:t}=e,[r,d]=(0,o.useState)([]),[c,u]=(0,o.useState)(null),[m,x]=(0,o.useState)(!1),[h,p]=(0,o.useState)([]),[v,g]=(0,o.useState)(!1),f=e=>{let t={...e,id:(0,l.Z)(),timestamp:new Date().toISOString()};p(e=>[t,...e])};return(0,s.jsx)(n.Provider,{value:{excelData:r,setExcelData:d,selectedRow:c,setSelectedRow:u,editModalOpen:m,setEditModalOpen:x,clearAllData:()=>{if(0===r.length){i.toast.error("N\xe3o h\xe1 dados para limpar na planilha.",{style:{background:"#373737",color:"#fff",border:"1px solid #938667"},iconTheme:{primary:"#938667",secondary:"#fff"}});return}window.confirm("Tem certeza que deseja limpar todos os dados da planilha?")&&(d([]),f({type:"REMO\xc7\xc3O",description:"Todos os dados da planilha foram removidos",details:{before:r,after:[]}}),i.toast.success("Planilha limpa com sucesso!",{style:{background:"#373737",color:"#fff",border:"1px solid #938667"},iconTheme:{primary:"#938667",secondary:"#fff"}}))},history:h,showHistory:v,setShowHistory:g,addHistoryEntry:f,addNewRow:e=>{let t={ITEM:(r.length+1).toString(),...e};d(e=>[...e,t]),f({type:"ADI\xc7\xc3O",description:"Nova linha adicionada",details:{after:t}}),i.toast.success("Nova linha adicionada com sucesso!",{style:{background:"#373737",color:"#fff",border:"1px solid #938667"},iconTheme:{primary:"#938667",secondary:"#fff"}})},addDataFromXLSX:()=>{try{let e=document.createElement("input");e.type="file",e.accept=".xlsx,.xls",e.onchange=async e=>{var t;let r=null===(t=e.target.files)||void 0===t?void 0:t[0];if(!r){i.toast.error("Nenhum arquivo selecionado");return}let s=new FileReader;s.onload=async e=>{try{var t;let s=null===(t=e.target)||void 0===t?void 0:t.result,o=a.ij(s,{type:"binary"}),l=o.SheetNames[0],n=o.Sheets[l],c=a.P6.sheet_to_json(n,{raw:!1,defval:"",blankrows:!1});if(!Array.isArray(c)||0===c.length){i.toast.error("Nenhum dado encontrado na planilha");return}let u=[];c.forEach((e,t)=>{if(e.CLIENTE||e.CPF||e.DATA||e["CORRETOR(A)"]){var r,s,o,a,l,i;let t={ITEM:(u.length+1).toString(),DATA:e.DATA||"",CLIENTE:e.CLIENTE||"",CPF:e.CPF||"","CORRETOR(A)":e["CORRETOR(A)"]||"","PARCERIA CORRETORES":e["PARCERIA CORRETORES"]||"","PARCERIA GESTORES":e["PARCERIA GESTORES"]||"","ORIGEM DO LEAD":e["ORIGEM DO LEAD"]||"",INCORPORADORA:e.INCORPORADORA||"","TIPO DO IM\xd3VEL":e["TIPO DO IM\xd3VEL"]||"","INFORMA\xc7\xc3O DO IM\xd3VEL":e["INFORMA\xc7\xc3O DO IM\xd3VEL"]||"","VGV R$":(null===(r=e["VGV R$"])||void 0===r?void 0:r.toString())||"","FORMA DE PAGAMENTO":e["FORMA DE PAGAMENTO"]||"",APROVAÇÃO:e["APROVA\xc7\xc3O"]||"",OBS:e.OBS||"",SITUAÇÃO:e["SITUA\xc7\xc3O"]||"","% COMISS\xc3O PREVISTA":(null===(s=e["% COMISS\xc3O PREVISTA"])||void 0===s?void 0:s.toString())||"","VGC PREVISTA":(null===(o=e["VGC PREVISTA"])||void 0===o?void 0:o.toString())||"","VGC REAL":(null===(a=e["VGC REAL"])||void 0===a?void 0:a.toString())||"","CAPTADOR?":e["CAPTADOR?"]||"","NOME DO CAPTADOR":e["NOME DO CAPTADOR"]||"","% COMISS\xc3O REAL":(null===(l=e["% COMISS\xc3O REAL"])||void 0===l?void 0:l.toString())||"","% COMISS\xc3O GESTOR":(null===(i=e["% COMISS\xc3O GESTOR"])||void 0===i?void 0:i.toString())||""};u.push(t)}}),d(u),f({type:"IMPORTA\xc7\xc3O",description:"".concat(u.length," registros importados do arquivo ").concat(r.name),details:{after:u}}),i.toast.success("".concat(u.length," registros importados com sucesso!"),{style:{background:"#373737",color:"#fff",border:"1px solid #938667"},iconTheme:{primary:"#938667",secondary:"#fff"}})}catch(e){console.error("Erro ao processar arquivo:",e),i.toast.error("Erro ao processar o arquivo. Verifique se o formato est\xe1 correto.")}},s.onerror=()=>{i.toast.error("Erro ao ler o arquivo")},s.readAsBinaryString(r)},e.click()}catch(e){console.error("Erro ao importar arquivo:",e),i.toast.error("Erro ao importar arquivo")}},handleExport:()=>{try{let e=a.P6.json_to_sheet(r),t=a.P6.book_new();a.P6.book_append_sheet(t,e,"Dados"),a.NC(t,"dados_exportados.xlsx"),i.toast.success("Dados exportados com sucesso para Excel!",{style:{background:"#373737",color:"#fff",border:"1px solid #938667"},iconTheme:{primary:"#938667",secondary:"#fff"}})}catch(e){console.error("Erro ao exportar arquivo:",e),i.toast.error("Erro ao exportar arquivo")}}},children:t})}function c(){let e=(0,o.useContext)(n);if(void 0===e)throw Error("useData deve ser usado dentro de um DataProvider");return e}},8404:function(e,t,r){"use strict";r.d(t,{Z:function(){return d}});var s=r(7437),o=r(2265),a=r(7574),l=r(4808),i=r(5925);let n={"VGV R$":"Valor Geral de Vendas em Reais",CPF:"Digite apenas n\xfameros - a formata\xe7\xe3o \xe9 autom\xe1tica",DATA:"Digite a data no formato DD/MM/AAAA","% COMISS\xc3O PREVISTA":"Porcentagem da comiss\xe3o prevista para a venda","VGC PREVISTA":"Valor Geral de Comiss\xe3o Prevista","VGC REAL":"Valor Geral de Comiss\xe3o Realizada","CAPTADOR?":"Indique se h\xe1 um captador para esta venda","% COMISS\xc3O REAL":"Porcentagem da comiss\xe3o efetivamente realizada","% COMISS\xc3O GESTOR":"Porcentagem da comiss\xe3o destinada ao gestor"};function d(e){let{data:t,onSave:r,rowIndex:d}=e,[c,u]=(0,o.useState)(t),[m,x]=(0,o.useState)(!1),{setEditModalOpen:h}=(0,a.e)(),{user:p}=(0,l.a)(),[v,g]=(0,o.useState)(null);(0,o.useEffect)(()=>{u(t)},[t]),(0,o.useEffect)(()=>{let e=e=>{m&&(e.preventDefault(),e.returnValue="")};return window.addEventListener("beforeunload",e),()=>window.removeEventListener("beforeunload",e)},[m]);let f=e=>e.replace(/\D/g,"").replace(/(\d{3})(\d{3})(\d{3})(\d{2})/g,"$1.$2.$3-$4").slice(0,14),O=e=>{let t=f(e.target.value);u(e=>({...e,CPF:t}))},R=(e,r)=>{if("PARCERIA GESTORES"===e&&(null==p?void 0:p.role)!=="MASTER"){i.toast.error("Apenas administradores podem alterar a equipe");return}if(x(!0),"CPF"===e)O({target:{value:r}});else{let s=e.includes("VGV")||e.includes("COMISS\xc3O")||e.includes("VGC")?parseFloat(r)||0:r;u(r=>{let o={...r,[e]:s};return x(JSON.stringify(o)!==JSON.stringify(t)),o})}},S=()=>{m?window.confirm("Existem altera\xe7\xf5es n\xe3o salvas. Deseja realmente sair?")&&(h(!1),(0,i.toast)("Altera\xe7\xf5es descartadas",{icon:"⚠️"})):h(!1)},A=async e=>{e.preventDefault();try{r(c),i.toast.success("Dados salvos com sucesso!"),x(!1),h(!1)}catch(e){i.toast.error("Erro ao salvar os dados. Tente novamente."),console.error("Erro ao salvar:",e)}},E=e=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e),b=e=>"".concat(e.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}),"%"),C=e=>"DATA"===e||"CPF"===e?"text":e.includes("VGV")||e.includes("VGC")||e.includes("COMISS\xc3O")?"number":"text",w=(e,t)=>{var r;return"DATA"===e?t||"":null!==(r=null==t?void 0:t.toString())&&void 0!==r?r:""},N=(e,r)=>{let s=e.target.value;u(e=>{let o={...e,[r]:s};return x(JSON.stringify(o)!==JSON.stringify(t)),o})},j=(e,t)=>{var r,s;return"CPF"===e?f(null!==(r=null==t?void 0:t.toString())&&void 0!==r?r:""):e.includes("VGV")||e.includes("VGC")?E(Number(t)||0):e.includes("COMISS\xc3O")?b(Number(t)||0):"DATA"===e?t||"":null!==(s=null==t?void 0:t.toString())&&void 0!==s?s:""};return(0,s.jsx)("div",{className:"fixed inset-0 bg-[#373737]/75 flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-[#373737] rounded-lg w-[95%] max-w-7xl max-h-[90vh] overflow-hidden flex flex-col",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center p-6 border-b border-[#938667]",children:[(0,s.jsxs)("h2",{className:"text-xl font-semibold text-white",children:["Editar Linha ",d+1]}),(0,s.jsx)("button",{onClick:S,className:"text-[#938667] hover:text-white transition-colors",children:(0,s.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,s.jsx)("form",{onSubmit:A,className:"flex-1 overflow-y-auto p-6",children:(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Object.entries(c).map(e=>{let[t,r]=e;return(0,s.jsxs)("div",{className:"flex flex-col relative",children:[(0,s.jsxs)("label",{className:"text-sm font-medium text-[#938667] mb-1 flex items-center gap-2",onMouseEnter:()=>g(t),onMouseLeave:()=>g(null),children:[t,n[t]&&(0,s.jsx)("svg",{className:"w-4 h-4 text-[#938667]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})]}),v===t&&n[t]&&(0,s.jsx)("div",{className:"absolute -top-12 left-0 bg-[#2A2A2A] text-white text-sm p-2 rounded shadow-lg z-10",children:n[t]}),(0,s.jsxs)("div",{className:"relative group",children:["DATA"===t?(0,s.jsx)("input",{id:"input-".concat(t),name:t,type:"text",value:w(t,r),onChange:e=>{N(e,t),x(!0)},placeholder:"DD/MM/AAAA",maxLength:10,autoComplete:"off",className:"w-full h-[42px] bg-[#2A2A2A] border border-[#938667] rounded px-3 focus:border-[#938667] outline-none text-white transition-all group-hover:border-white",disabled:"PARCERIA GESTORES"===t&&(null==p?void 0:p.role)!=="MASTER"}):(0,s.jsx)("input",{id:"input-".concat(t),name:t,type:C(t),value:w(t,r),onChange:e=>R(t,e.target.value),className:"w-full h-[42px] bg-[#2A2A2A] border border-[#938667] rounded px-3 focus:border-[#938667] outline-none text-white transition-all group-hover:border-white ".concat("PARCERIA GESTORES"===t&&(null==p?void 0:p.role)!=="MASTER"?"opacity-50 cursor-not-allowed":""),placeholder:"CPF"===t?"000.000.000-00":"",disabled:"PARCERIA GESTORES"===t&&(null==p?void 0:p.role)!=="MASTER"}),(t.includes("VGV")||t.includes("VGC")||t.includes("COMISS\xc3O")||"CPF"===t)&&(0,s.jsx)("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-sm text-[#938667]",children:j(t,r)})]})]},t)})})}),(0,s.jsx)("div",{className:"p-6 border-t border-[#938667] bg-[#2A2A2A]",children:(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("div",{className:"text-sm text-[#938667]",children:m?"Existem altera\xe7\xf5es n\xe3o salvas":"Nenhuma altera\xe7\xe3o pendente"}),(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsxs)("button",{type:"button",onClick:S,className:"px-6 py-2 text-sm font-medium text-white bg-[#373737] hover:bg-[#938667] rounded transition-colors flex items-center gap-2",children:[(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Cancelar"]}),(0,s.jsxs)("button",{onClick:A,disabled:!m,className:"px-6 py-2 text-sm font-medium text-white bg-[#938667] hover:bg-[#7a6f55] rounded transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Salvar"]})]})]})})]})})}},9238:function(e,t,r){"use strict";r.d(t,{Z:function(){return x}});var s=r(7437),o=r(2265),a=r(7660),l=r(3216),i=r(7574),n=r(4808);let d=["ITEM","DATA","CLIENTE","CPF","CORRETOR(A)","PARCERIA CORRETORES","PARCERIA GESTORES","ORIGEM DO LEAD","INCORPORADORA","TIPO DO IM\xd3VEL","INFORMA\xc7\xc3O DO IM\xd3VEL","VGV R$","FORMA DE PAGAMENTO","APROVA\xc7\xc3O","OBS","SITUA\xc7\xc3O","% COMISS\xc3O PREVISTA","VGC PREVISTA","VGC REAL","CAPTADOR?","NOME DO CAPTADOR","% COMISS\xc3O REAL","% COMISS\xc3O GESTOR"],c={ITEM:"120px",DATA:"150px",CLIENTE:"250px",CPF:"180px","CORRETOR(A)":"250px","PARCERIA CORRETORES":"250px","PARCERIA GESTORES":"250px","ORIGEM DO LEAD":"180px",INCORPORADORA:"250px","TIPO DO IM\xd3VEL":"180px","INFORMA\xc7\xc3O DO IM\xd3VEL":"400px","VGV R$":"180px","FORMA DE PAGAMENTO":"250px",APROVAÇÃO:"180px",OBS:"1000px",SITUAÇÃO:"180px","% COMISS\xc3O PREVISTA":"180px","VGC PREVISTA":"180px","VGC REAL":"180px","CAPTADOR?":"180px","NOME DO CAPTADOR":"250px","% COMISS\xc3O REAL":"180px","% COMISS\xc3O GESTOR":"180px"},u=(0,a.Cl)(),m=(0,o.memo)(e=>{let{value:t,onChange:r,onBlur:a,width:l,onKeyDown:i}=e,[n,d]=(0,o.useState)(t);return(0,o.useEffect)(()=>{d(t)},[t]),(0,s.jsx)("input",{value:n,onChange:e=>{let t=e.target.value;d(t),r(t)},onBlur:a,onKeyDown:i,style:{minWidth:l},className:"w-full bg-transparent p-2 border border-transparent hover:border-[#938667] focus:border-[#373737] outline-none text-[#373737]"})});function x(e){let{data:t,onDataChange:r}=e,{selectedRow:x,setSelectedRow:h,setEditModalOpen:p}=(0,i.e)(),{user:v}=(0,n.a)(),[g,f]=(0,o.useState)([]),O=(e,t)=>{(null==v?void 0:v.role)!=="CORRETOR"&&(h({data:e,index:t}),p(!0))},R=e=>{(null==v?void 0:v.role)!=="CORRETOR"&&window.confirm("Tem certeza que deseja excluir esta linha?")&&r(t.filter((t,r)=>r!==e).map((e,t)=>({...e,ITEM:(t+1).toString()})))},S=e=>{(null==v?void 0:v.role)!=="CORRETOR"&&window.confirm("Tem certeza que deseja excluir esta coluna?")&&r(t.map(t=>{let r={...t};return delete r[e],r}))},A=(0,o.useMemo)(()=>d.map(e=>u.accessor(t=>t[e],{id:e,header:t=>{let{column:r}=t;return(0,s.jsx)("div",{className:"relative group",children:(0,s.jsxs)("div",{className:"px-4 py-2 bg-[#373737] font-semibold text-white cursor-pointer hover:bg-[#938667] flex items-center justify-between",onClick:()=>r.toggleSorting(),children:[(0,s.jsx)("span",{className:"text-white",children:e}),(null==v?void 0:v.role)!=="CORRETOR"&&(0,s.jsx)("button",{onClick:t=>{t.stopPropagation(),S(e)},className:"opacity-0 group-hover:opacity-100 transition-opacity text-white hover:text-red-300 ml-2",title:"Excluir coluna",children:(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})})},cell:o=>{var a,l;let{row:i,getValue:n}=o,d=n();return(null==x?void 0:x.index)===i.index&&(null==x?void 0:x.data[e])!==d&&(null==v?void 0:v.role)!=="CORRETOR"?(0,s.jsx)(m,{value:null!==(a=null==d?void 0:d.toString())&&void 0!==a?a:"",onChange:s=>{let o=[...t];o[i.index]={...o[i.index],[e]:s},r(o)},onBlur:()=>h(null),width:c[e],onKeyDown:e=>{"Enter"===e.key&&h(null)}}):(0,s.jsx)("div",{className:"px-4 py-2 text-[#373737] ".concat((null==v?void 0:v.role)!=="CORRETOR"?"hover:bg-[#938667]/10 cursor-pointer":""," whitespace-nowrap overflow-hidden text-ellipsis"),onClick:()=>O(i.original,i.index),children:null!==(l=null==d?void 0:d.toString())&&void 0!==l?l:""})},enableSorting:!0,sortingFn:(e,t,r)=>{let s=e.getValue(r),o=t.getValue(r);return"number"==typeof s&&"number"==typeof o?s-o:String(s).localeCompare(String(o))}})),[t,x,r,null==v?void 0:v.role]),E=(0,l.b7)({data:t,columns:A,state:{sorting:g},onSortingChange:f,getCoreRowModel:(0,a.sC)(),getSortedRowModel:(0,a.tj)()});return(0,s.jsx)("div",{className:"w-full h-full border border-[#938667]",children:(0,s.jsx)("div",{className:"w-full h-full overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full border-collapse",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[E.getHeaderGroups().map(e=>e.headers.map((t,r)=>(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("th",{className:"border-b border-[#938667] bg-[#373737] px-6 py-4 text-sm whitespace-nowrap text-white relative",style:{width:c[t.column.id]},children:[(0,l.ie)(t.column.columnDef.header,t.getContext()),r<e.headers.length-1&&(0,s.jsx)("div",{className:"absolute right-0 top-1/2 -translate-y-1/2 h-6 w-[1px] bg-[#938667]"})]},t.id)}))),(0,s.jsxs)("th",{className:"border-b border-[#938667] bg-[#373737] w-24 px-6 py-4 text-sm whitespace-nowrap text-white relative",style:{width:"96px"},children:[(0,s.jsx)("div",{className:"absolute right-0 top-1/2 -translate-y-1/2 h-6 w-[1px] bg-[#938667]"}),"A\xe7\xf5es"]})]})}),(0,s.jsx)("tbody",{children:E.getRowModel().rows.map((e,t)=>(0,s.jsxs)("tr",{className:"hover:bg-gray-50 ".concat((null==v?void 0:v.role)!=="CORRETOR"?"cursor-pointer":""," bg-white"),onClick:()=>O(e.original,t),children:[e.getVisibleCells().map((t,r)=>(0,s.jsxs)("td",{className:"border-b border-gray-200 px-6 py-4 text-sm text-gray-900 relative",style:{width:c[t.column.id]},children:[(0,l.ie)(t.column.columnDef.cell,t.getContext()),r<e.getVisibleCells().length-1&&(0,s.jsx)("div",{className:"absolute right-0 top-1/2 -translate-y-1/2 h-6 w-[1px] bg-[#938667]"})]},t.id)),(0,s.jsxs)("td",{className:"border-b border-gray-200 px-6 py-4 relative",style:{width:"96px"},children:[(0,s.jsx)("div",{className:"absolute right-0 top-1/2 -translate-y-1/2 h-6 w-[1px] bg-[#938667]"}),(null==v?void 0:v.role)!=="CORRETOR"&&(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("button",{onClick:r=>{r.stopPropagation(),O(e.original,t)},className:"text-blue-600 hover:text-blue-900 transition-colors",title:"Editar linha",children:(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),(0,s.jsx)("button",{onClick:e=>{e.stopPropagation(),R(t)},className:"text-red-600 hover:text-red-900 transition-colors",title:"Excluir linha",children:(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})]},e.id))})]})})})}m.displayName="EditableCell"},7984:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});var s=r(7437);r(2265);var o=r(5871),a=r(8027);let l=e=>"#938667",i=e=>{switch(e){case"ADI\xc7\xc3O":return(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})});case"EDI\xc7\xc3O":return(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})});case"REMO\xc7\xc3O":return(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})});case"IMPORTA\xc7\xc3O":return(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})});default:return(0,s.jsx)(s.Fragment,{})}};function n(e){let{isOpen:t,onClose:r,history:n}=e;if(!t)return null;let d=n.reduce((e,t)=>{let r=t.timestamp.split("T")[0];return e[r]||(e[r]=[]),e[r].push(t),e},{});return(0,s.jsx)("div",{className:"fixed inset-0 bg-[#373737]/75 flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-[#373737] rounded-lg p-4 md:p-6 w-full max-w-6xl max-h-[90vh] overflow-hidden flex flex-col",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4 md:mb-6 px-2",children:[(0,s.jsx)("h2",{className:"text-lg md:text-xl font-semibold text-white",children:"Hist\xf3rico de Altera\xe7\xf5es"}),(0,s.jsx)("button",{onClick:r,className:"text-[#938667] hover:text-white transition-colors",children:(0,s.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,s.jsx)("div",{className:"overflow-y-auto flex-1 px-2",children:Object.entries(d).sort((e,t)=>new Date(t[0]).getTime()-new Date(e[0]).getTime()).map(e=>{let[t,r]=e;return(0,s.jsxs)("div",{className:"mb-4 md:mb-6",children:[(0,s.jsx)("h3",{className:"text-[#938667] font-medium mb-2 md:mb-3 text-sm md:text-base",children:(0,o.Z)(new Date(t),"dd 'de' MMMM 'de' yyyy",{locale:a.Z})}),(0,s.jsx)("div",{className:"space-y-3 md:space-y-4",children:r.sort((e,t)=>new Date(t.timestamp).getTime()-new Date(e.timestamp).getTime()).map(e=>(0,s.jsx)("div",{className:"bg-[#2A2A2A] rounded-lg p-3 md:p-4 border border-[#938667]/20",children:(0,s.jsxs)("div",{className:"flex items-start gap-3 md:gap-4",children:[(0,s.jsx)("div",{className:"flex-shrink-0 ".concat(l(e.type)," p-2 rounded-lg text-white"),children:i(e.type)}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between flex-wrap gap-2",children:[(0,s.jsx)("span",{className:"text-white font-medium text-sm md:text-base",children:e.type}),(0,s.jsx)("span",{className:"text-xs md:text-sm text-[#938667]",children:(0,o.Z)(new Date(e.timestamp),"HH:mm")})]}),(0,s.jsx)("p",{className:"text-[#938667] mt-1 text-sm md:text-base break-words",children:e.description}),e.details.field&&(0,s.jsxs)("div",{className:"mt-2 text-xs md:text-sm",children:[(0,s.jsx)("span",{className:"text-[#938667]",children:"Campo alterado: "}),(0,s.jsx)("span",{className:"text-white break-words",children:e.details.field})]}),(e.details.before||e.details.after)&&(0,s.jsxs)("div",{className:"mt-2 grid grid-cols-1 md:grid-cols-2 gap-2 md:gap-4 text-xs md:text-sm",children:[e.details.before&&(0,s.jsxs)("div",{className:"bg-[#373737] p-2 rounded",children:[(0,s.jsx)("span",{className:"text-[#938667]",children:"Antes: "}),(0,s.jsx)("span",{className:"text-white break-words overflow-hidden",children:"object"==typeof e.details.before?JSON.stringify(e.details.before,null,2):String(e.details.before)})]}),e.details.after&&(0,s.jsxs)("div",{className:"bg-[#373737] p-2 rounded",children:[(0,s.jsx)("span",{className:"text-[#938667]",children:"Depois: "}),(0,s.jsx)("span",{className:"text-white break-words overflow-hidden",children:"object"==typeof e.details.after?JSON.stringify(e.details.after,null,2):String(e.details.after)})]})]})]})]})},e.id))})]},t)})})]})})}}}]);