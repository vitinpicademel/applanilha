(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[235],{67:function(){},2061:function(){},9575:function(e,t,r){"use strict";r.d(t,{Z:function(){return d}});var o=r(7437),s=r(2265),a=r(7574),i=r(4808),n=r(4033);function l(e){let{children:t}=e,{isAuthenticated:r}=(0,i.a)(),a=(0,n.useRouter)(),l=(0,n.usePathname)();return((0,s.useEffect)(()=>{r||"/login"===l||"/register"===l||a.replace("/login")},[r,a,l]),r||"/login"===l||"/register"===l)?(0,o.jsx)(o.Fragment,{children:t}):null}function d(e){let{children:t}=e,[r,d]=(0,s.useState)(!1),{handleExport:u,addDataFromXLSX:c}=(0,a.e)(),{logout:h,user:m}=(0,i.a)(),f=(0,n.useRouter)();return(0,o.jsx)(l,{children:(0,o.jsxs)("div",{className:"flex h-screen bg-[#373737] relative",children:[(0,o.jsx)("div",{className:"bg-[#938667] shadow-lg transition-all duration-300 ease-in-out ".concat(r?"w-64":"w-0"," overflow-hidden relative"),children:(0,o.jsxs)("div",{className:"p-4",children:[(0,o.jsx)("h2",{className:"text-lg font-semibold text-white mb-6",children:"Op\xe7\xf5es"}),(0,o.jsxs)("nav",{className:"space-y-3",children:[(0,o.jsxs)("button",{onClick:()=>f.push("/"),className:"w-full px-4 py-3 text-left text-sm font-medium text-white hover:bg-[#373737] hover:text-white rounded-lg transition-all duration-200 flex items-center gap-3 border border-[#373737] hover:border-white",children:[(0,o.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),"Menu Inicial"]}),(0,o.jsxs)("button",{onClick:()=>f.push("/minha-conta"),className:"w-full px-4 py-3 text-left text-sm font-medium text-white hover:bg-[#373737] hover:text-white rounded-lg transition-all duration-200 flex items-center gap-3 border border-[#373737] hover:border-white",children:[(0,o.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"Minha Conta"]}),((null==m?void 0:m.role)==="MASTER"||(null==m?void 0:m.role)==="GESTOR")&&(0,o.jsxs)("button",{onClick:()=>f.push("/gerenciar-usuarios"),className:"w-full px-4 py-3 text-left text-sm font-medium text-white hover:bg-[#373737] hover:text-white rounded-lg transition-all duration-200 flex items-center gap-3 border border-[#373737] hover:border-white",children:[(0,o.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})}),"Gerenciar Usu\xe1rios"]}),(0,o.jsx)("div",{className:"h-[1px] bg-[#373737]/20 my-3"}),((null==m?void 0:m.role)==="MASTER"||(null==m?void 0:m.role)==="GESTOR")&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("button",{onClick:()=>{c()},className:"w-full px-4 py-3 text-left text-sm font-medium text-white hover:bg-[#373737] hover:text-white rounded-lg transition-all duration-200 flex items-center gap-3 border border-[#373737] hover:border-white",children:[(0,o.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),"Importar Excel"]}),(0,o.jsxs)("button",{onClick:u,className:"w-full px-4 py-3 text-left text-sm font-medium text-white hover:bg-[#373737] hover:text-white rounded-lg transition-all duration-200 flex items-center gap-3 border border-[#373737] hover:border-white",children:[(0,o.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Exportar Excel"]})]}),(0,o.jsx)("div",{className:"h-[1px] bg-[#373737]/20 my-3"}),(0,o.jsxs)("button",{onClick:()=>{h(),f.push("/login")},className:"w-full px-4 py-3 text-left text-sm font-medium text-white hover:bg-[#373737] hover:text-white rounded-lg transition-all duration-200 flex items-center gap-3 border border-[#373737] hover:border-white",children:[(0,o.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Sair da conta"]})]})]})}),(0,o.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden relative",children:[(0,o.jsx)("button",{onClick:()=>d(!r),className:"fixed top-4 z-50 p-2 rounded-lg bg-[#938667] shadow-md hover:bg-[#7a6f55] transition-all duration-300 border border-[#373737] ".concat(r?"left-64":"left-4"),children:(0,o.jsx)("svg",{className:"w-6 h-6 text-white transition-transform ".concat(r?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),(0,o.jsx)("div",{className:"flex-1 overflow-auto",children:t}),(0,o.jsx)("div",{className:"absolute bottom-2 left-0 right-0 text-center",children:(0,o.jsx)("span",{className:"text-[#938667]/30 text-sm font-medium select-none",children:"Desenvolvido por Kak\xe1\xae"})})]})]})})}},4808:function(e,t,r){"use strict";r.d(t,{H:function(){return d},a:function(){return u}});var o=r(7437),s=r(2265),a=r(1872),i=r(5925),n=r(1490);let l=(0,s.createContext)(void 0);function d(e){let{children:t}=e,[r,d]=(0,s.useState)({user:null,isAuthenticated:!1});(0,s.useEffect)(()=>{let e=localStorage.getItem("auth"),t=n.Z.get("auth");if(e&&t&&d(JSON.parse(e)),0===JSON.parse(localStorage.getItem("users")||"[]").length){let e={id:(0,a.Z)(),email:"admin@admin.com",name:"Administrador",role:"MASTER",password:"admin123",createdAt:new Date().toISOString(),lastLogin:new Date().toISOString()};localStorage.setItem("users",JSON.stringify([e]))}},[]),(0,s.useEffect)(()=>{r.isAuthenticated?(localStorage.setItem("auth",JSON.stringify(r)),n.Z.set("auth","true",{expires:7})):(localStorage.removeItem("auth"),n.Z.remove("auth"))},[r]);let u=async(e,t)=>{let r=JSON.parse(localStorage.getItem("users")||"[]"),o=r.find(r=>r.email===e&&r.password===t);if(o){let e=r.map(e=>e.id===o.id?{...e,lastLogin:new Date().toISOString()}:e);localStorage.setItem("users",JSON.stringify(e));let t={user:{...o,lastLogin:new Date().toISOString()},isAuthenticated:!0};return d(t),localStorage.setItem("auth",JSON.stringify(t)),n.Z.set("auth","true",{expires:7}),i.toast.success("Login realizado com sucesso!"),!0}return i.toast.error("Email ou senha inv\xe1lidos"),!1},c=async e=>{let t=JSON.parse(localStorage.getItem("users")||"[]");if(t.some(t=>t.email===e.email))return i.toast.error("Email j\xe1 cadastrado"),!1;if("GESTOR"===e.role&&!e.teamId)return i.toast.error("ID da equipe \xe9 obrigat\xf3rio para Gestores"),!1;if("CORRETOR"===e.role&&!e.managerId)return i.toast.error("ID do gestor \xe9 obrigat\xf3rio para Corretores"),!1;if("CORRETOR"===e.role&&!t.some(t=>"GESTOR"===t.role&&t.id===e.managerId))return i.toast.error("Gestor n\xe3o encontrado"),!1;let r={id:(0,a.Z)(),...e,createdAt:new Date().toISOString(),lastLogin:new Date().toISOString()};return t.push(r),localStorage.setItem("users",JSON.stringify(t)),i.toast.success("Usu\xe1rio registrado com sucesso!"),!0};return(0,o.jsx)(l.Provider,{value:{...r,login:u,logout:()=>{d({user:null,isAuthenticated:!1}),localStorage.removeItem("auth"),n.Z.remove("auth"),i.toast.success("Logout realizado com sucesso!")},register:c,getUsers:()=>{let e=JSON.parse(localStorage.getItem("users")||"[]");if(!r.user)return[];switch(r.user.role){case"MASTER":return e;case"GESTOR":return e.filter(e=>{var t;return"CORRETOR"===e.role&&e.managerId===(null===(t=r.user)||void 0===t?void 0:t.id)});default:return[]}},deleteUser:e=>{var t;if((null===(t=r.user)||void 0===t?void 0:t.role)!=="MASTER"){i.toast.error("Sem permiss\xe3o para excluir usu\xe1rios");return}let o=JSON.parse(localStorage.getItem("users")||"[]").filter(t=>t.id!==e);localStorage.setItem("users",JSON.stringify(o)),i.toast.success("Usu\xe1rio exclu\xeddo com sucesso!")},updateUser:(e,t)=>{var o,s,a;if((null===(o=r.user)||void 0===o?void 0:o.id)!==e&&(null===(s=r.user)||void 0===s?void 0:s.role)!=="MASTER"){i.toast.error("Sem permiss\xe3o para atualizar usu\xe1rios");return}let n=JSON.parse(localStorage.getItem("users")||"[]").map(r=>r.id===e?{...r,...t}:r);if(localStorage.setItem("users",JSON.stringify(n)),e===(null===(a=r.user)||void 0===a?void 0:a.id)){let t=n.find(t=>t.id===e);t&&d(e=>({...e,user:t}))}i.toast.success("Informa\xe7\xf5es atualizadas com sucesso!")}},children:t})}let u=()=>{let e=(0,s.useContext)(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},7574:function(e,t,r){"use strict";r.d(t,{F:function(){return d},e:function(){return u}});var o=r(7437),s=r(2265),a=r(7504),i=r(1872),n=r(5925);let l=(0,s.createContext)(void 0);function d(e){let{children:t}=e,[r,d]=(0,s.useState)([]),[u,c]=(0,s.useState)(null),[h,m]=(0,s.useState)(!1),[f,v]=(0,s.useState)([]),[g,x]=(0,s.useState)(!1),p=e=>{let t={...e,id:(0,i.Z)(),timestamp:new Date().toISOString()};v(e=>[t,...e])};return(0,o.jsx)(l.Provider,{value:{excelData:r,setExcelData:d,selectedRow:u,setSelectedRow:c,editModalOpen:h,setEditModalOpen:m,clearAllData:()=>{if(0===r.length){n.toast.error("N\xe3o h\xe1 dados para limpar na planilha.",{style:{background:"#373737",color:"#fff",border:"1px solid #938667"},iconTheme:{primary:"#938667",secondary:"#fff"}});return}window.confirm("Tem certeza que deseja limpar todos os dados da planilha?")&&(d([]),p({type:"REMO\xc7\xc3O",description:"Todos os dados da planilha foram removidos",details:{before:r,after:[]}}),n.toast.success("Planilha limpa com sucesso!",{style:{background:"#373737",color:"#fff",border:"1px solid #938667"},iconTheme:{primary:"#938667",secondary:"#fff"}}))},history:f,showHistory:g,setShowHistory:x,addHistoryEntry:p,addNewRow:e=>{let t={ITEM:(r.length+1).toString(),...e};d(e=>[...e,t]),p({type:"ADI\xc7\xc3O",description:"Nova linha adicionada",details:{after:t}}),n.toast.success("Nova linha adicionada com sucesso!",{style:{background:"#373737",color:"#fff",border:"1px solid #938667"},iconTheme:{primary:"#938667",secondary:"#fff"}})},addDataFromXLSX:()=>{try{let e=document.createElement("input");e.type="file",e.accept=".xlsx,.xls",e.onchange=async e=>{var t;let r=null===(t=e.target.files)||void 0===t?void 0:t[0];if(!r){n.toast.error("Nenhum arquivo selecionado");return}let o=new FileReader;o.onload=async e=>{try{var t;let o=null===(t=e.target)||void 0===t?void 0:t.result,s=a.ij(o,{type:"binary"}),i=s.SheetNames[0],l=s.Sheets[i],u=a.P6.sheet_to_json(l,{raw:!1,defval:"",blankrows:!1});if(!Array.isArray(u)||0===u.length){n.toast.error("Nenhum dado encontrado na planilha");return}let c=[];u.forEach((e,t)=>{if(e.CLIENTE||e.CPF||e.DATA||e["CORRETOR(A)"]){var r,o,s,a,i,n;let t={ITEM:(c.length+1).toString(),DATA:e.DATA||"",CLIENTE:e.CLIENTE||"",CPF:e.CPF||"","CORRETOR(A)":e["CORRETOR(A)"]||"","PARCERIA CORRETORES":e["PARCERIA CORRETORES"]||"","PARCERIA GESTORES":e["PARCERIA GESTORES"]||"","ORIGEM DO LEAD":e["ORIGEM DO LEAD"]||"",INCORPORADORA:e.INCORPORADORA||"","TIPO DO IM\xd3VEL":e["TIPO DO IM\xd3VEL"]||"","INFORMA\xc7\xc3O DO IM\xd3VEL":e["INFORMA\xc7\xc3O DO IM\xd3VEL"]||"","VGV R$":(null===(r=e["VGV R$"])||void 0===r?void 0:r.toString())||"","FORMA DE PAGAMENTO":e["FORMA DE PAGAMENTO"]||"",APROVAÇÃO:e["APROVA\xc7\xc3O"]||"",OBS:e.OBS||"",SITUAÇÃO:e["SITUA\xc7\xc3O"]||"","% COMISS\xc3O PREVISTA":(null===(o=e["% COMISS\xc3O PREVISTA"])||void 0===o?void 0:o.toString())||"","VGC PREVISTA":(null===(s=e["VGC PREVISTA"])||void 0===s?void 0:s.toString())||"","VGC REAL":(null===(a=e["VGC REAL"])||void 0===a?void 0:a.toString())||"","CAPTADOR?":e["CAPTADOR?"]||"","NOME DO CAPTADOR":e["NOME DO CAPTADOR"]||"","% COMISS\xc3O REAL":(null===(i=e["% COMISS\xc3O REAL"])||void 0===i?void 0:i.toString())||"","% COMISS\xc3O GESTOR":(null===(n=e["% COMISS\xc3O GESTOR"])||void 0===n?void 0:n.toString())||""};c.push(t)}}),d(c),p({type:"IMPORTA\xc7\xc3O",description:"".concat(c.length," registros importados do arquivo ").concat(r.name),details:{after:c}}),n.toast.success("".concat(c.length," registros importados com sucesso!"),{style:{background:"#373737",color:"#fff",border:"1px solid #938667"},iconTheme:{primary:"#938667",secondary:"#fff"}})}catch(e){console.error("Erro ao processar arquivo:",e),n.toast.error("Erro ao processar o arquivo. Verifique se o formato est\xe1 correto.")}},o.onerror=()=>{n.toast.error("Erro ao ler o arquivo")},o.readAsBinaryString(r)},e.click()}catch(e){console.error("Erro ao importar arquivo:",e),n.toast.error("Erro ao importar arquivo")}},handleExport:()=>{try{let e=a.P6.json_to_sheet(r),t=a.P6.book_new();a.P6.book_append_sheet(t,e,"Dados"),a.NC(t,"dados_exportados.xlsx"),n.toast.success("Dados exportados com sucesso para Excel!",{style:{background:"#373737",color:"#fff",border:"1px solid #938667"},iconTheme:{primary:"#938667",secondary:"#fff"}})}catch(e){console.error("Erro ao exportar arquivo:",e),n.toast.error("Erro ao exportar arquivo")}}},children:t})}function u(){let e=(0,s.useContext)(l);if(void 0===e)throw Error("useData deve ser usado dentro de um DataProvider");return e}}}]);