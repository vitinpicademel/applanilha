(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{6847:function(e,o,s){Promise.resolve().then(s.bind(s,6039))},6039:function(e,o,s){"use strict";s.r(o),s.d(o,{default:function(){return x}});var t=s(7437),l=s(2265),r=s(9238),n=s(7574),a=s(8404),i=s(7984),d=s(5925);s(7504),s(930),s(9320);var c=s(4808),u=s(4033);function x(){let{excelData:e,setExcelData:o,selectedRow:s,editModalOpen:x,setEditModalOpen:h,setSelectedRow:m,clearAllData:p,history:g,showHistory:v,setShowHistory:f,addNewRow:O,addDataFromXLSX:j}=(0,n.e)(),{user:R,isAuthenticated:N}=(0,c.a)(),[E,b]=(0,l.useState)([]),[C,A]=(0,l.useState)(""),[w,T]=(0,l.useState)("TODOS"),[S,D]=(0,l.useState)("TODAS");(0,l.useRef)(null);let k=(0,u.useRouter)();(0,l.useEffect)(()=>{N||k.push("/login")},[N,k]);let L=(0,l.useCallback)(e=>{if(!R)return console.log("Sem usu\xe1rio, retornando array vazio"),[];switch(console.log("Filtrando por cargo:",R.role),console.log("ID da equipe:",R.teamId),console.log("Nome do usu\xe1rio:",R.name),console.log("Dados recebidos para filtrar:",e),R.role){case"MASTER":return console.log("Usu\xe1rio MASTER - retornando todos os dados"),e;case"GESTOR":return console.log("Usu\xe1rio GESTOR - retornando todos os dados temporariamente"),e;case"CORRETOR":console.log("Usu\xe1rio CORRETOR - filtrando por nome");let o=e.filter(e=>e["CORRETOR(A)"]===R.name);return console.log("Dados filtrados para CORRETOR:",o),o;default:return console.log("Cargo desconhecido, retornando array vazio"),[]}},[R]);return(0,l.useEffect)(()=>{if(console.log("useEffect: Atualizando dados filtrados"),console.log("excelData:",e),console.log("user:",R),!e||0===e.length){console.log("Nenhum dado dispon\xedvel"),b([]);return}if(!R){console.log("Nenhum usu\xe1rio logado"),b([]);return}let o=L(e);console.log("Dados ap\xf3s filtro por cargo:",o),C.trim()&&(o=o.filter(e=>{var o;return"TODOS"===w?Object.values(e).some(e=>null==e?void 0:e.toString().toLowerCase().includes(C.toLowerCase())):null===(o=e[w])||void 0===o?void 0:o.toString().toLowerCase().includes(C.toLowerCase())})),"TODAS"!==S&&(o=o.filter(e=>e["SITUA\xc7\xc3O"]===S)),b(o)},[e,R,L,C,w,S]),(0,t.jsxs)("div",{className:"min-h-screen bg-[#373737]",children:[(0,t.jsx)("header",{className:"bg-[#373737] text-white p-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between px-12",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"bg-white rounded-lg p-2",children:(0,t.jsx)("img",{src:"/images/logo.png",alt:"Logo",className:"w-10 h-10"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold",children:"Controle de Vendas"}),(0,t.jsx)("p",{className:"text-sm text-[#938667]",children:"Importe e gerencie seus dados de forma eficiente"})]})]}),(0,t.jsxs)("button",{onClick:()=>f(!0),className:"px-4 py-2 text-sm font-medium text-white bg-[#938667] hover:bg-[#7a6f55] rounded-lg transition-colors flex items-center gap-2",children:[(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Hist\xf3rico"]})]})}),(0,t.jsxs)("main",{className:"w-full px-4 py-6",children:[(0,t.jsx)("div",{className:"bg-[#938667] rounded-lg shadow-sm p-6 mb-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-white",children:"Gerenciar Dados"}),(0,t.jsx)("p",{className:"text-sm text-white/70 mt-1",children:"Adicione ou remova dados da planilha"})]}),(0,t.jsx)("div",{className:"flex gap-4",children:((null==R?void 0:R.role)==="MASTER"||(null==R?void 0:R.role)==="GESTOR")&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("button",{onClick:()=>{if((null==R?void 0:R.role)==="CORRETOR"){d.toast.error("Corretores n\xe3o podem adicionar novos dados");return}O({DATA:new Date().toLocaleDateString("pt-BR"),CLIENTE:"",CPF:"","CORRETOR(A)":(null==R?void 0:R.role)==="GESTOR"?"":(null==R?void 0:R.name)||"","PARCERIA CORRETORES":"","PARCERIA GESTORES":(null==R?void 0:R.role)==="GESTOR"&&R.teamId||"","ORIGEM DO LEAD":"",INCORPORADORA:"","TIPO DO IM\xd3VEL":"","INFORMA\xc7\xc3O DO IM\xd3VEL":"","VGV R$":"","FORMA DE PAGAMENTO":"",APROVAÇÃO:"",OBS:"",SITUAÇÃO:"PENDENTE","% COMISS\xc3O PREVISTA":"","VGC PREVISTA":"","VGC REAL":"","CAPTADOR?":"","NOME DO CAPTADOR":"","% COMISS\xc3O REAL":"","% COMISS\xc3O GESTOR":""})},className:"px-4 py-2 text-sm font-medium text-white bg-[#373737] hover:bg-[#373737]/80 rounded-lg transition-colors flex items-center gap-2",children:[(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Adicionar Dados"]}),(0,t.jsxs)("button",{onClick:j,className:"px-4 py-2 text-sm font-medium text-white bg-[#373737] hover:bg-[#373737]/80 rounded-lg transition-colors flex items-center gap-2",children:[(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),"Importar XLSX"]}),(0,t.jsxs)("button",{onClick:p,className:"px-4 py-2 text-sm font-medium text-white bg-[#373737] hover:bg-[#7a6f55] rounded-lg transition-colors flex items-center gap-2",children:[(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Limpar Planilha"]})]})})]})}),(0,t.jsx)("div",{className:"bg-[#373737]/50 p-4 rounded-lg mb-6",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,t.jsxs)("div",{className:"relative flex flex-col",children:[(0,t.jsx)("label",{htmlFor:"searchTerm",className:"mb-2 text-sm font-medium text-[#938667]",children:"Buscar por"}),(0,t.jsx)("input",{id:"searchTerm",name:"searchTerm",type:"text",value:C,onChange:e=>A(e.target.value),className:"w-full h-[42px] px-4 py-2 bg-[#373737] border border-[#938667] rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-[#7a6f55]",placeholder:"Digite para buscar..."})]}),(0,t.jsxs)("div",{className:"relative flex flex-col",children:[(0,t.jsx)("label",{htmlFor:"selectedField",className:"mb-2 text-sm font-medium text-[#938667]",children:"Campo"}),(0,t.jsxs)("select",{id:"selectedField",name:"selectedField",value:w,onChange:e=>T(e.target.value),className:"w-full h-[42px] px-4 py-2 bg-[#373737] border border-[#938667] rounded-lg text-white focus:outline-none focus:border-[#7a6f55] appearance-none",children:[(0,t.jsx)("option",{value:"TODOS",children:"TODOS"}),(0,t.jsx)("option",{value:"CLIENTE",children:"CLIENTE"}),(0,t.jsx)("option",{value:"CPF",children:"CPF"}),(0,t.jsx)("option",{value:"CORRETOR(A)",children:"CORRETOR(A)"}),(0,t.jsx)("option",{value:"INCORPORADORA",children:"INCORPORADORA"})]}),(0,t.jsx)("div",{className:"absolute right-3 top-[38px] pointer-events-none",children:(0,t.jsx)("svg",{className:"w-4 h-4 text-[#938667]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),(0,t.jsxs)("div",{className:"relative flex flex-col",children:[(0,t.jsx)("label",{htmlFor:"selectedStatus",className:"mb-2 text-sm font-medium text-[#938667]",children:"Situa\xe7\xe3o"}),(0,t.jsxs)("select",{id:"selectedStatus",name:"selectedStatus",value:S,onChange:e=>D(e.target.value),className:"w-full h-[42px] px-4 py-2 bg-[#373737] border border-[#938667] rounded-lg text-white focus:outline-none focus:border-[#7a6f55] appearance-none",children:[(0,t.jsx)("option",{value:"TODAS",children:"TODAS"}),(0,t.jsx)("option",{value:"PENDENTE",children:"PENDENTE"}),(0,t.jsx)("option",{value:"APROVADO",children:"APROVADO"}),(0,t.jsx)("option",{value:"REPROVADO",children:"REPROVADO"})]}),(0,t.jsx)("div",{className:"absolute right-3 top-[38px] pointer-events-none",children:(0,t.jsx)("svg",{className:"w-4 h-4 text-[#938667]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]})}),(0,t.jsxs)("div",{className:"bg-[#938667] rounded-lg shadow-sm overflow-hidden",children:[(0,t.jsxs)("div",{className:"p-4 border-b border-[#373737]",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-white",children:"Dados Importados"}),(0,t.jsxs)("p",{className:"text-sm text-white mt-1",children:["Total de registros: ",E.length," de ",e.length]})]}),(0,t.jsx)("div",{className:"relative",children:(0,t.jsx)("div",{className:"overflow-x-auto overflow-y-auto max-h-[600px]",children:(0,t.jsx)(r.Z,{data:E,onDataChange:e=>{o(e),d.toast.success("Dados atualizados com sucesso!")}})})})]})]}),x&&s&&(0,t.jsx)(a.Z,{data:s.data,onSave:t=>{if(!s)return;let l=[...e];l[s.index]=t,o(l),m(null),h(!1),d.toast.success("Linha atualizada com sucesso!")},rowIndex:s.index}),(0,t.jsx)(i.Z,{isOpen:v,onClose:()=>f(!1),history:g}),(0,t.jsx)("div",{className:"fixed bottom-4 right-4 text-xs text-[#938667]",children:"Desenvolvido por Kaka\xae"})]})}}},function(e){e.O(0,[425,505,918,181,506,971,938,744],function(){return e(e.s=6847)}),_N_E=e.O()}]);