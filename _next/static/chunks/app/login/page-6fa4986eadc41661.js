(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{9211:function(e,t,r){Promise.resolve().then(r.bind(r,378))},4808:function(e,t,r){"use strict";r.d(t,{H:function(){return u},a:function(){return c}});var s=r(7437),a=r(2265),o=r(1872),i=r(5925),l=r(1490);let n=(0,a.createContext)(void 0);function u(e){let{children:t}=e,[r,u]=(0,a.useState)({user:null,isAuthenticated:!1});(0,a.useEffect)(()=>{let e=localStorage.getItem("auth"),t=l.Z.get("auth");if(e&&t&&u(JSON.parse(e)),0===JSON.parse(localStorage.getItem("users")||"[]").length){let e={id:(0,o.Z)(),email:"admin@admin.com",name:"Administrador",role:"MASTER",password:"admin123",createdAt:new Date().toISOString(),lastLogin:new Date().toISOString()};localStorage.setItem("users",JSON.stringify([e]))}},[]),(0,a.useEffect)(()=>{r.isAuthenticated?(localStorage.setItem("auth",JSON.stringify(r)),l.Z.set("auth","true",{expires:7})):(localStorage.removeItem("auth"),l.Z.remove("auth"))},[r]);let c=async(e,t)=>{let r=JSON.parse(localStorage.getItem("users")||"[]"),s=r.find(r=>r.email===e&&r.password===t);if(s){let e=r.map(e=>e.id===s.id?{...e,lastLogin:new Date().toISOString()}:e);localStorage.setItem("users",JSON.stringify(e));let t={user:{...s,lastLogin:new Date().toISOString()},isAuthenticated:!0};return u(t),localStorage.setItem("auth",JSON.stringify(t)),l.Z.set("auth","true",{expires:7}),i.toast.success("Login realizado com sucesso!"),!0}return i.toast.error("Email ou senha inv\xe1lidos"),!1},d=async e=>{let t=JSON.parse(localStorage.getItem("users")||"[]");if(t.some(t=>t.email===e.email))return i.toast.error("Email j\xe1 cadastrado"),!1;if("GESTOR"===e.role&&!e.teamId)return i.toast.error("ID da equipe \xe9 obrigat\xf3rio para Gestores"),!1;if("CORRETOR"===e.role&&!e.managerId)return i.toast.error("ID do gestor \xe9 obrigat\xf3rio para Corretores"),!1;if("CORRETOR"===e.role&&!t.some(t=>"GESTOR"===t.role&&t.id===e.managerId))return i.toast.error("Gestor n\xe3o encontrado"),!1;let r={id:(0,o.Z)(),...e,createdAt:new Date().toISOString(),lastLogin:new Date().toISOString()};return t.push(r),localStorage.setItem("users",JSON.stringify(t)),i.toast.success("Usu\xe1rio registrado com sucesso!"),!0};return(0,s.jsx)(n.Provider,{value:{...r,login:c,logout:()=>{u({user:null,isAuthenticated:!1}),localStorage.removeItem("auth"),l.Z.remove("auth"),i.toast.success("Logout realizado com sucesso!")},register:d,getUsers:()=>{let e=JSON.parse(localStorage.getItem("users")||"[]");if(!r.user)return[];switch(r.user.role){case"MASTER":return e;case"GESTOR":return e.filter(e=>{var t;return"CORRETOR"===e.role&&e.managerId===(null===(t=r.user)||void 0===t?void 0:t.id)});default:return[]}},deleteUser:e=>{var t;if((null===(t=r.user)||void 0===t?void 0:t.role)!=="MASTER"){i.toast.error("Sem permiss\xe3o para excluir usu\xe1rios");return}let s=JSON.parse(localStorage.getItem("users")||"[]").filter(t=>t.id!==e);localStorage.setItem("users",JSON.stringify(s)),i.toast.success("Usu\xe1rio exclu\xeddo com sucesso!")},updateUser:(e,t)=>{var s,a,o;if((null===(s=r.user)||void 0===s?void 0:s.id)!==e&&(null===(a=r.user)||void 0===a?void 0:a.role)!=="MASTER"){i.toast.error("Sem permiss\xe3o para atualizar usu\xe1rios");return}let l=JSON.parse(localStorage.getItem("users")||"[]").map(r=>r.id===e?{...r,...t}:r);if(localStorage.setItem("users",JSON.stringify(l)),e===(null===(o=r.user)||void 0===o?void 0:o.id)){let t=l.find(t=>t.id===e);t&&u(e=>({...e,user:t}))}i.toast.success("Informa\xe7\xf5es atualizadas com sucesso!")}},children:t})}let c=()=>{let e=(0,a.useContext)(n);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},378:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return u}});var s=r(7437),a=r(2265),o=r(4808),i=r(4033),l=r(6691),n=r.n(l);function u(){let[e,t]=(0,a.useState)(""),[r,l]=(0,a.useState)(""),[u,c]=(0,a.useState)(!1),{login:d}=(0,o.a)(),m=(0,i.useRouter)(),g=async t=>{t.preventDefault(),c(!0);try{await d(e,r)&&m.push("/")}finally{c(!1)}};return(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-[#2A2A2A]",children:(0,s.jsxs)("div",{className:"bg-[#373737] p-8 rounded-lg shadow-lg w-full max-w-md",children:[(0,s.jsxs)("div",{className:"flex flex-col items-center mb-8",children:[(0,s.jsx)("div",{className:"w-32 h-32 relative mb-4 rounded-full overflow-hidden border-2 border-[#938667]",children:(0,s.jsx)(n(),{src:"/images/logo.png",alt:"Logo da empresa",fill:!0,className:"object-contain",priority:!0})}),(0,s.jsx)("h1",{className:"text-2xl font-semibold text-white",children:"Bem-vindo(a)"}),(0,s.jsx)("p",{className:"text-[#938667] mt-2",children:"Fa\xe7a login para continuar"})]}),(0,s.jsxs)("form",{onSubmit:g,className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-[#938667] mb-2",children:"E-mail"}),(0,s.jsx)("input",{id:"email",type:"email",value:e,onChange:e=>t(e.target.value),className:"w-full px-4 py-2 bg-[#2A2A2A] border border-[#938667] rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-[#938667]",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-[#938667] mb-2",children:"Senha"}),(0,s.jsx)("input",{id:"password",type:"password",value:r,onChange:e=>l(e.target.value),className:"w-full px-4 py-2 bg-[#2A2A2A] border border-[#938667] rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-[#938667]",required:!0})]}),(0,s.jsx)("button",{type:"submit",disabled:u,className:"w-full py-3 px-4 bg-[#938667] text-white rounded-lg font-medium \n              ".concat(u?"opacity-50 cursor-not-allowed":"hover:bg-[#7a6f55] transition-colors","\n            "),children:u?"Entrando...":"Entrar"})]}),(0,s.jsxs)("div",{className:"mt-6 text-center",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,s.jsx)("div",{className:"w-full border-t border-[#938667]/30"})}),(0,s.jsx)("div",{className:"relative flex justify-center text-sm",children:(0,s.jsx)("span",{className:"px-2 bg-[#373737] text-[#938667]",children:"N\xe3o tem uma conta?"})})]}),(0,s.jsx)("button",{onClick:()=>{m.push("/register")},className:"mt-4 w-full py-3 px-4 bg-transparent text-[#938667] border border-[#938667] rounded-lg font-medium  hover:bg-[#938667] hover:text-white transition-colors",children:"Criar conta"})]})]})})}}},function(e){e.O(0,[883,971,938,744],function(){return e(e.s=9211)}),_N_E=e.O()}]);